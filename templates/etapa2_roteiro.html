{% extends "layout.html" %}
{% block content %}
    <h1>Etapa 2: Gerar Roteiro com IA</h1>

    {% if status.roteiro %}
        <div class="status completo">
            <p><strong>Um roteiro já existe:</strong> {{ status.roteiro }}</p>
            <a href="{{ url_for('etapa3_narracao') }}">Continuar para a Etapa 3 &rarr;</a>
            <form action="{{ url_for('excluir', etapa='roteiro') }}" method="post" style="display: inline-block; margin-left: 10px;">
                 <input type="hidden" name="action" value="delete_all">
                <button type="submit" onclick="return confirm('Isso irá apagar o roteiro. Deseja recomeçar?')">Excluir e Recomeçar</button>
            </form>
        </div>
    {% else %}
        <div class="status pendente">
            <p>A transcrição para o tema <strong>"{{ status.tema_novela }}"</strong> está pronta para ser transformada em um roteiro.</p>
            <p>Clique no botão abaixo para que a IA da Gemini crie uma narração cativante baseada neste texto.</p>
            <br>
            <form method="post">
                <button type="submit" style="padding: 15px; font-size: 16px;">
                    ✨ Gerar Roteiro com IA
                </button>
            </form>
        </div>
    {% endif %}
{% endblock %}
